(()=>{"use strict";console.log("üöÄ CryptoTracker Loading...");!function(){const t=document.createElement("style");t.textContent="\n        *{box-sizing:border-box;margin:0;padding:0}\n        body{font-family:-apple-system,BlinkMacSystemFont,sans-serif!important;background:#0c0c0c!important;color:#fff!important;line-height:1.4!important;min-height:100vh!important}\n        .app-header{background:rgba(255,255,255,.05)!important;backdrop-filter:blur(10px)!important;border-bottom:1px solid rgba(255,255,255,.1)!important;padding:16px 0!important;position:sticky!important;top:0!important;z-index:1000!important}\n        .header-content{max-width:1400px!important;margin:0 auto!important;padding:0 20px!important;display:flex!important;justify-content:space-between!important;align-items:center!important;gap:16px!important}\n        .app-title{color:#fff!important;font-size:1.8rem!important;font-weight:800!important;margin:0!important;display:flex!important;align-items:center!important;gap:8px!important}\n        .crypto-icon{font-size:2rem!important;color:#00d4ff!important}\n        .version{font-size:.7rem!important;background:#667eea!important;color:#fff!important;padding:4px 8px!important;border-radius:8px!important;font-weight:600!important}\n        .header-actions{display:flex!important;gap:8px!important;align-items:center!important}\n        .header-btn,.update-timer{background:rgba(255,255,255,.08)!important;color:#fff!important;border:1px solid rgba(255,255,255,.1)!important;padding:8px 12px!important;border-radius:12px!important;font-weight:600!important;font-size:.8rem!important;cursor:pointer!important;transition:all .15s ease!important}\n        .header-btn:hover{background:rgba(255,255,255,.12)!important;color:#00d4ff!important}\n        .update-timer{cursor:default!important;font-family:monospace!important}\n        .countdown-display{color:#00d4ff!important;font-weight:700!important;min-width:28px!important;text-align:center!important}\n        .countdown-display.warning{color:#f59e0b!important}\n        .countdown-display.critical{color:#ef4444!important}\n        .app-main{max-width:1400px!important;margin:0 auto!important;padding:20px!important}\n        .market-overview{background:rgba(255,255,255,.05)!important;backdrop-filter:blur(10px)!important;border:1px solid rgba(255,255,255,.1)!important;border-radius:16px!important;padding:20px!important;margin-bottom:20px!important}\n        .overview-header{display:flex!important;justify-content:space-between!important;align-items:center!important;margin-bottom:16px!important;gap:16px!important}\n        .overview-title{color:#fff!important;font-size:1.4rem!important;font-weight:700!important;margin:0!important}\n        .last-updated{color:#b8c6db!important;font-size:.8rem!important;font-family:monospace!important}\n        .market-stats{display:grid!important;grid-template-columns:repeat(auto-fit,minmax(140px,1fr))!important;gap:12px!important}\n        .stat-item{background:rgba(0,0,0,.2)!important;border:1px solid rgba(255,255,255,.1)!important;border-radius:12px!important;padding:12px!important;text-align:center!important;transition:transform .15s ease!important}\n        .stat-item:hover{transform:translateY(-1px)!important;background:rgba(0,212,255,.1)!important}\n        .stat-label{display:block!important;color:#b8c6db!important;font-size:.7rem!important;font-weight:600!important;text-transform:uppercase!important;margin-bottom:4px!important}\n        .stat-value{color:#00d4ff!important;font-size:1rem!important;font-weight:700!important;font-family:monospace!important}\n        .coin-list{display:grid!important;grid-template-columns:repeat(auto-fill,minmax(320px,1fr))!important;gap:16px!important}\n        .coin-card{background:rgba(255,255,255,.05)!important;backdrop-filter:blur(10px)!important;border:1px solid rgba(255,255,255,.1)!important;border-radius:16px!important;padding:16px!important;cursor:pointer!important;transition:all .15s ease!important;color:#fff!important;min-height:200px!important;display:flex!important;flex-direction:column!important;justify-content:space-between!important}\n        .coin-card:hover{transform:translateY(-2px)!important;border-color:rgba(0,212,255,.3)!important;box-shadow:0 4px 20px rgba(0,0,0,.3)!important}\n        .loading-spinner{width:40px!important;height:40px!important;border:3px solid rgba(0,212,255,.2)!important;border-top:3px solid #00d4ff!important;border-radius:50%!important;animation:spin .8s linear infinite!important;margin:0 auto 16px!important}\n        @keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}\n        .market-analysis-bar{background:rgba(15,23,42,.4)!important;backdrop-filter:blur(10px)!important;border:1px solid rgba(148,163,184,.2)!important;border-radius:16px!important;padding:20px!important;margin:20px 0!important}\n        .analysis-label{color:#00d4ff!important;font-size:.9rem!important;font-weight:700!important;margin-bottom:12px!important;text-transform:uppercase!important}\n        .analysis-buttons{display:flex!important;gap:8px!important;flex-wrap:wrap!important;margin-bottom:16px!important}\n        .analysis-btn{background:rgba(30,35,50,.6)!important;color:#b8c6db!important;border:1px solid rgba(148,163,184,.2)!important;border-radius:12px!important;padding:8px 12px!important;font-size:.7rem!important;font-weight:600!important;cursor:pointer!important;transition:all .15s ease!important;text-transform:uppercase!important}\n        .analysis-btn:hover{background:rgba(0,212,255,.1)!important;color:#00d4ff!important;border-color:rgba(0,212,255,.3)!important}\n        .analysis-btn.active{background:#4facfe!important;color:#fff!important;border-color:rgba(0,212,255,.6)!important}\n        .sort-select{background:rgba(16,185,129,.1)!important;color:#fff!important;border:1px solid rgba(255,255,255,.15)!important;padding:8px 16px!important;border-radius:12px!important;font-size:.8rem!important;font-weight:600!important;cursor:pointer!important;transition:all .15s ease;min-width:200px!important;appearance:none!important;outline:none!important}\n        .sort-select:hover{border-color:rgba(16,185,129,.4)!important;color:rgba(16,185,129,.9)!important}\n        @media (max-width:768px){\n            .header-content{flex-direction:column!important;padding:0 16px!important}\n            .app-title{font-size:1.5rem!important}\n            .app-main{padding:16px!important}\n            .coin-list{grid-template-columns:1fr!important;gap:12px!important}\n            .coin-card{min-height:160px!important;padding:12px!important}\n            .market-stats{grid-template-columns:repeat(2,1fr)!important;gap:8px!important}\n            .analysis-buttons{flex-direction:column!important}\n            .analysis-btn{width:100%!important;text-align:center!important}\n            .sort-select{min-width:100%!important}\n        }\n        @media (max-width:480px){\n            .market-stats{grid-template-columns:1fr!important}\n            .overview-header{flex-direction:column!important;text-align:center!important}\n        }\n    ",document.head.appendChild(t)}();class t{constructor(){this.coins=[],this.currentFilter="all",this.currentSort="rank",this.countdownTimer=60,this.isLoading=!1,this.lastUpdateTime=0,this.renderQueue=[],this.isRendering=!1,this.displayedCoinsCount=0,this.maxDisplayCoins=12}async init(){console.log("üöÄ Initializing High-Performance Crypto App..."),this.setupPerformanceOptimizations(),this.loadData(),this.startCountdown(),console.log("‚úÖ App initialized successfully")}setupPerformanceOptimizations(){let t;document.addEventListener("scroll",this.throttle((()=>{}),16),{passive:!0}),window.addEventListener("resize",(()=>{clearTimeout(t),t=setTimeout((()=>{this.coins.length>0&&this.renderCoins()}),150)}),{passive:!0}),this.preloadResources()}preloadResources(){const t=document.createElement("link");t.rel="preload",t.href="https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZ9hiA.woff2",t.as="font",t.type="font/woff2",t.crossOrigin="anonymous",document.head.appendChild(t)}throttle(t,e){let n;return(...i)=>{n||(t.apply(this,i),n=!0,setTimeout((()=>n=!1),e))}}async loadData(){if(this.isLoading)return;this.isLoading=!0;const t=document.getElementById("coin-list-container"),e=document.getElementById("status");if(t&&e)try{0===this.coins.length&&(e.style.display="block",e.innerHTML='\n                    <div style="text-align:center;padding:40px 20px;color:#b8c6db">\n                        <div class="loading-spinner"></div>\n                        <h3 style="color:#fff;font-size:1.2rem;margin:16px 0;font-weight:700">Loading Market Data</h3>\n                        <p style="opacity:.8;font-size:.9rem">Fetching live prices...</p>\n                    </div>\n                ');const t=new AbortController,n=setTimeout((()=>t.abort()),5e3),i=await fetch("/api/crypto-data",{signal:t.signal,headers:{Accept:"application/json","Cache-Control":"no-cache"}});if(clearTimeout(n),!i.ok)throw new Error(`HTTP ${i.status}`);const r=await i.json();this.coins=r.data||[],this.lastUpdateTime=Date.now(),this.batchUpdate((()=>{this.updateMarketStats(),this.renderCoins(),this.updateLastUpdated(),e.style.display="none"})),console.log("‚úÖ Data loaded:",this.coins.length,"coins")}catch(t){console.error("‚ùå Error loading data:",t),e.innerHTML='\n                <div style="text-align:center;padding:40px 20px;color:#ef4444">\n                    <div style="font-size:2rem;margin-bottom:12px">‚ö†Ô∏è</div>\n                    <h3 style="margin-bottom:8px;font-size:1.1rem">Connection Error</h3>\n                    <p style="margin-bottom:16px;opacity:.8;font-size:.9rem">Unable to load data</p>\n                    <button onclick="location.reload()" style="padding:8px 16px;background:rgba(0,212,255,.2);border:1px solid #00d4ff;border-radius:8px;color:#00d4ff;cursor:pointer;font-weight:600;font-size:.8rem">üîÑ Retry</button>\n                </div>\n            '}finally{this.isLoading=!1}else this.isLoading=!1}batchUpdate(t){this.isRendering||(this.isRendering=!0,requestAnimationFrame((()=>{t(),this.isRendering=!1})))}updateMarketStats(){if(0===this.coins.length)return;const t=this.coins.reduce(((t,e)=>t+(e.market_cap||0)),0),e=this.coins.reduce(((t,e)=>t+(e.volume_24h||0)),0),n=this.coins.find((t=>"BTC"===t.symbol)),i=n&&t>0?(n.market_cap/t*100).toFixed(1):"0",r=this.coins.filter((t=>t.percent_change_24h>0)).length,a=this.coins.length>0?(r/this.coins.length*100).toFixed(0):"0",o={"total-market-cap":`$${(t/1e12).toFixed(2)}T`,"total-volume":`$${(e/1e9).toFixed(1)}B`,"btc-dominance":`${i}%`,"market-sentiment":`${a}%`,"active-coins":this.coins.length.toString(),"trending-up":r.toString()};document.createDocumentFragment(),Object.entries(o).forEach((([t,e])=>{const n=document.getElementById(t);n&&n.textContent!==e&&(n.textContent=e)}))}updateLastUpdated(){const t=document.getElementById("last-updated");if(t){const e=new Date;t.textContent=`Updated: ${e.toLocaleTimeString()}`}}startCountdown(){this.countdownInterval&&clearInterval(this.countdownInterval),this.countdownInterval=setInterval((()=>{this.countdownTimer--;const t=document.getElementById("countdown-display");if(t){t.textContent=`${this.countdownTimer}s`;const e="countdown-display";this.countdownTimer<=10?t.className=`${e} critical`:this.countdownTimer<=20?t.className=`${e} warning`:t.className=e}this.countdownTimer<=0&&(this.countdownTimer=60,this.loadData())}),1e3)}renderCoins(){const t=document.getElementById("coin-list-container");if(!t||0===this.coins.length)return;let e=this.filterCoins(this.coins,this.currentFilter);e=this.sortCoins(e,this.currentSort),window.innerWidth;const n=e.slice(0,this.maxDisplayCoins),i=e.length>this.maxDisplayCoins,r=document.createDocumentFragment(),a=document.createElement("div");a.style.cssText="margin-bottom:16px;padding:12px 16px;background:rgba(0,0,0,.3);border-radius:12px;text-align:center;border:1px solid rgba(255,255,255,.15);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:12px";const o=e.filter((t=>t.percent_change_24h>0)).length,s=e.filter((t=>t.percent_change_24h<0)).length;a.innerHTML=`\n            <div style="display:flex;align-items:center;gap:16px;flex-wrap:wrap">\n                <div style="display:flex;align-items:center;gap:4px">\n                    <span style="color:#b8c6db;font-size:.8rem">Showing</span>\n                    <span style="color:#00d4ff;font-weight:700;font-size:.9rem">${n.length}</span>\n                    <span style="color:#b8c6db;font-size:.8rem">of ${e.length}</span>\n                </div>\n                <div style="display:flex;align-items:center;gap:16px">\n                    <div style="display:flex;align-items:center;gap:4px">\n                        <span style="color:#10b981;font-size:.8rem">üìà ${o}</span>\n                    </div>\n                    <div style="display:flex;align-items:center;gap:4px">\n                        <span style="color:#ef4444;font-size:.8rem">üìâ ${s}</span>\n                    </div>\n                </div>\n            </div>\n            ${i?`\n                <button id="load-more-btn" style="padding:8px 16px;background:linear-gradient(135deg,#00d4ff,#4facfe);border:none;border-radius:8px;color:#fff;cursor:pointer;font-size:.8rem;font-weight:600;transition:all .2s ease;box-shadow:0 2px 8px rgba(0,212,255,.3)">\n                    üìä Load More (${e.length-this.maxDisplayCoins} remaining)\n                </button>\n            `:""}\n        `,r.appendChild(a);const d=document.createElement("div");d.className="coin-list",n.forEach(((t,e)=>{const n=document.createElement("div");n.className="coin-card",n.onclick=()=>this.showDetails(t.symbol),n.innerHTML=this.createEnhancedCoinCardHTML(t,e),d.appendChild(n)})),r.appendChild(d),t.innerHTML="",t.appendChild(r);const l=document.getElementById("load-more-btn");l&&(l.onclick=()=>this.loadMoreCoins(),l.addEventListener("mouseenter",(()=>{l.style.transform="translateY(-2px)",l.style.boxShadow="0 4px 16px rgba(0,212,255,.5)"})),l.addEventListener("mouseleave",(()=>{l.style.transform="translateY(0)",l.style.boxShadow="0 2px 8px rgba(0,212,255,.3)"}))),requestAnimationFrame((()=>{this.initializeMiniCharts(n)}))}createEnhancedCoinCardHTML(t,e){const n=t.percent_change_24h>0,i=n?"üìà":"üìâ",r=n?"#10b981":"#ef4444",a=n?"rgba(16,185,129,.1)":"rgba(239,68,68,.1)",o=n?"rgba(16,185,129,.3)":"rgba(239,68,68,.3)",s=t.volatility_score||5,d=s>7?"#ef4444":s>4?"#f59e0b":"#10b981",l=s>7?"High":s>4?"Med":"Low";return`\n            <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px">\n                <div style="flex:1">\n                    <h3 style="color:#fff;font-size:1.1rem;font-weight:700;margin:0 0 4px 0;line-height:1.2">${t.name}</h3>\n                    <div style="display:flex;align-items:center;gap:8px">\n                        <span style="color:#00d4ff;font-size:.7rem;font-weight:600;background:rgba(0,212,255,.1);padding:2px 6px;border-radius:6px;border:1px solid rgba(0,212,255,.3)">${t.symbol}</span>\n                        <span style="color:${d};font-size:.6rem;font-weight:600;background:rgba(${d.slice(1)},0.1);padding:1px 4px;border-radius:4px;border:1px solid rgba(${d.slice(1)},0.3)">${l}</span>\n                    </div>\n                </div>\n                <div style="background:rgba(255,255,255,.1);color:#b8c6db;font-size:.65rem;font-weight:600;padding:4px 8px;border-radius:8px;border:1px solid rgba(255,255,255,.1)">#${t.rank}</div>\n            </div>\n\n            <div style="color:#fff;font-size:1.4rem;font-weight:800;margin:12px 0;font-family:monospace">\n                $${this.formatPrice(t.price)}\n            </div>\n\n            <div style="display:flex;align-items:center;gap:4px;font-weight:600;font-size:.9rem;margin-bottom:12px;padding:4px 8px;border-radius:8px;color:${r};background:${a};border:1px solid ${o}">\n                <span style="font-size:1rem">${i}</span>\n                <span>${n?"+":""}${t.percent_change_24h.toFixed(2)}%</span>\n            </div>\n\n            \x3c!-- Enhanced Mini Chart Section --\x3e\n            <div id="mini-chart-${e}" style="height:60px;margin:12px 0;background:rgba(0,0,0,.2);border-radius:8px;padding:8px;position:relative;overflow:hidden">\n                <div style="position:absolute;top:4px;left:8px;font-size:.6rem;color:#b8c6db;font-weight:600">7D Trend</div>\n                <canvas id="chart-canvas-${e}" width="280" height="44" style="width:100%;height:44px;cursor:pointer"></canvas>\n            </div>\n\n            <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:auto">\n                <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.1);border-radius:8px;padding:8px;text-align:center;transition:all .2s ease" onmouseenter="this.style.background='rgba(0,212,255,.05)'" onmouseleave="this.style.background='rgba(0,0,0,.2)'">\n                    <span style="display:block;color:#b8c6db;font-size:.6rem;font-weight:600;text-transform:uppercase;margin-bottom:2px">Market Cap</span>\n                    <span style="color:#00d4ff;font-size:.8rem;font-weight:700;font-family:monospace">$${this.formatMarketCap(t.market_cap)}</span>\n                </div>\n                <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.1);border-radius:8px;padding:8px;text-align:center;transition:all .2s ease" onmouseenter="this.style.background='rgba(0,212,255,.05)'" onmouseleave="this.style.background='rgba(0,0,0,.2)'">\n                    <span style="display:block;color:#b8c6db;font-size:.6rem;font-weight:600;text-transform:uppercase;margin-bottom:2px">Volume</span>\n                    <span style="color:#00d4ff;font-size:.8rem;font-weight:700;font-family:monospace">$${this.formatVolume(t.volume_24h)}</span>\n                </div>\n            </div>\n        `}initializeMiniCharts(t){t.forEach(((t,e)=>{const n=document.getElementById(`chart-canvas-${e}`);if(!n)return;const i=n.getContext("2d");if(!i)return;const r=n.getBoundingClientRect(),a=window.devicePixelRatio||1;n.width=r.width*a,n.height=r.height*a,i.scale(a,a),this.renderEnhancedMiniChart(i,t,r.width,r.height,e),this.addChartInteractivity(n,t,e)}))}renderEnhancedMiniChart(t,e,n,i,r){const a=e.price_history||[];if(a.length<2)return;const o=n-8,s=i-8,d=Math.min(...a),l=Math.max(...a)-d;if(0===l)return t.strokeStyle="#666",t.lineWidth=2,t.beginPath(),t.moveTo(4,i/2),t.lineTo(n-4,i/2),void t.stroke();const p=t.createLinearGradient(0,0,0,i),c=e.percent_change_24h>0,g=c?"#10b981":"#ef4444",m=c?"rgba(16,185,129,0.1)":"rgba(239,68,68,0.1)";p.addColorStop(0,g),p.addColorStop(1,m);const f=a.map(((t,e)=>({x:4+e/(a.length-1)*o,y:4+(1-(t-d)/l)*s})));t.fillStyle=p,t.beginPath(),t.moveTo(f[0].x,i-4),f.forEach(((e,n)=>{if(0===n)t.lineTo(e.x,e.y);else{const i=f[n-1],r=(i.x+e.x)/2;t.quadraticCurveTo(i.x,i.y,r,(i.y+e.y)/2),t.quadraticCurveTo(r,(i.y+e.y)/2,e.x,e.y)}})),t.lineTo(f[f.length-1].x,i-4),t.closePath(),t.fill(),t.strokeStyle=g,t.lineWidth=2,t.beginPath(),f.forEach(((e,n)=>{if(0===n)t.moveTo(e.x,e.y);else{const i=f[n-1],r=(i.x+e.x)/2;t.quadraticCurveTo(i.x,i.y,r,(i.y+e.y)/2),t.quadraticCurveTo(r,(i.y+e.y)/2,e.x,e.y)}})),t.stroke(),t.fillStyle=g,f.forEach(((e,n)=>{0!==n&&n!==f.length-1||(t.beginPath(),t.arc(e.x,e.y,2,0,2*Math.PI),t.fill())}));const h=a[a.length-1]>a[0],b=h?"‚Üó":"‚Üò",x=h?"#10b981":"#ef4444";t.fillStyle=x,t.font="12px Arial",t.fillText(b,n-20,16)}filterCoins(t,e){switch(e){case"high_momentum":return t.filter((t=>t.percent_change_24h>5));case"oversold":return t.filter((t=>(t.rsi||50)<30));case"overbought":return t.filter((t=>(t.rsi||50)>70));case"large_cap":return t.filter((t=>t.market_cap>1e10));case"mid_cap":return t.filter((t=>t.market_cap>1e9&&t.market_cap<=1e10));case"small_cap":return t.filter((t=>t.market_cap<=1e9));default:return t}}sortCoins(t,e){const n=[...t];switch(e){case"price":return n.sort(((t,e)=>e.price-t.price));case"change":return n.sort(((t,e)=>e.percent_change_24h-t.percent_change_24h));case"volume":return n.sort(((t,e)=>e.volume_24h-t.volume_24h));case"market_cap":return n.sort(((t,e)=>e.market_cap-t.market_cap));case"name":return n.sort(((t,e)=>t.name.localeCompare(e.name)));default:return n.sort(((t,e)=>t.rank-e.rank))}}filterByAnalysis(t){this.currentFilter=t,document.querySelectorAll(".analysis-btn").forEach((t=>t.classList.remove("active")));const e=document.querySelector(`[data-filter="${t}"]`);e&&e.classList.add("active"),this.batchUpdate((()=>this.renderCoins()))}handleSortChange(){const t=document.getElementById("sort-select");t&&(this.currentSort=t.value,this.batchUpdate((()=>this.renderCoins())))}addChartInteractivity(t,e,n){let i=!1,r=null;t.addEventListener("mouseenter",(()=>{i=!0,t.style.cursor="pointer",r=document.createElement("div"),r.style.cssText="\n                position: absolute;\n                background: rgba(0,0,0,.9);\n                color: #fff;\n                padding: 8px 12px;\n                border-radius: 6px;\n                font-size: 0.75rem;\n                pointer-events: none;\n                z-index: 1000;\n                border: 1px solid rgba(255,255,255,.2);\n                box-shadow: 0 4px 12px rgba(0,0,0,.3);\n            ";const n=e.price_history||[],a=Math.min(...n),o=Math.max(...n),s=e.price;r.innerHTML=`\n                <div><strong>${e.symbol}</strong></div>\n                <div>Current: $${this.formatPrice(s)}</div>\n                <div>7D High: $${this.formatPrice(o)}</div>\n                <div>7D Low: $${this.formatPrice(a)}</div>\n                <div style="color: ${e.percent_change_24h>0?"#10b981":"#ef4444"}">\n                    24h: ${e.percent_change_24h>0?"+":""}${e.percent_change_24h.toFixed(2)}%\n                </div>\n            `,document.body.appendChild(r)})),t.addEventListener("mousemove",(t=>{r&&i&&(r.style.left=t.pageX+10+"px",r.style.top=t.pageY-10+"px")})),t.addEventListener("mouseleave",(()=>{i=!1,t.style.cursor="default",r&&(document.body.removeChild(r),r=null)})),t.addEventListener("click",(()=>{this.showDetails(e.symbol)}))}loadMoreCoins(){console.log("üìä Loading more coins...");const t=window.innerWidth<768?4:8;this.maxDisplayCoins+=t;const e=document.getElementById("load-more-btn");e&&(e.innerHTML,e.innerHTML='\n                <div style="display:flex;align-items:center;gap:8px">\n                    <div style="width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top:2px solid #fff;border-radius:50%;animation:spin .8s linear infinite"></div>\n                    Loading...\n                </div>\n            ',e.style.pointerEvents="none",setTimeout((()=>{this.renderCoins(),console.log(`‚úÖ Loaded more coins. Now showing ${this.maxDisplayCoins} coins`)}),300))}createAdvancedPriceChart(t,e){if(!t||0===t.length)return'<div style="display:flex;align-items:center;justify-content:center;height:100%;color:#8b97a3">No price data available</div>';const n=Math.min(...t),i=Math.max(...t);if(0===i-n)return'<div style="display:flex;align-items:center;justify-content:center;height:100%;color:#8b97a3">Price stable</div>';const r=`advanced-chart-${Date.now()}`;return setTimeout((()=>{const n=document.getElementById(r);if(!n)return;const i=n.getContext("2d");i&&this.renderAdvancedChart(i,t,e,800,300)}),100),`\n            <div style="position:relative;width:100%;height:100%">\n                <canvas id="${r}" width="800" height="300" style="width:100%;height:100%;border-radius:12px;background:rgba(0,0,0,.2)"></canvas>\n                <div style="position:absolute;top:8px;right:8px;display:flex;gap:4px">\n                    <div style="background:rgba(0,0,0,.6);color:#fff;padding:4px 8px;border-radius:4px;font-size:.7rem">\n                        High: $${i.toFixed(2)}\n                    </div>\n                    <div style="background:rgba(0,0,0,.6);color:#fff;padding:4px 8px;border-radius:4px;font-size:.7rem">\n                        Low: $${n.toFixed(2)}\n                    </div>\n                </div>\n            </div>\n        `}renderAdvancedChart(t,e,n,i,r){const a=40,o=i-80,s=r-80,d=Math.min(...e),l=Math.max(...e),p=l-d;t.clearRect(0,0,i,r),t.strokeStyle="rgba(255,255,255,0.1)",t.lineWidth=1;for(let e=0;e<=4;e++){const n=a+e/4*s;t.beginPath(),t.moveTo(a,n),t.lineTo(i-a,n),t.stroke()}for(let e=0;e<=6;e++){const n=a+e/6*o;t.beginPath(),t.moveTo(n,a),t.lineTo(n,r-a),t.stroke()}const c=t.createLinearGradient(0,a,0,r-a),g=n?"#10b981":"#ef4444",m=n?"rgba(16,185,129,0.1)":"rgba(239,68,68,0.1)";c.addColorStop(0,g),c.addColorStop(1,m);const f=e.map(((t,n)=>({x:a+n/(e.length-1)*o,y:a+(1-(t-d)/p)*s})));t.fillStyle=c,t.beginPath(),t.moveTo(f[0].x,r-a),f.forEach(((e,n)=>{t.lineTo(e.x,e.y)})),t.lineTo(f[f.length-1].x,r-a),t.closePath(),t.fill(),t.strokeStyle=g,t.lineWidth=3,t.beginPath(),f.forEach(((e,n)=>{0===n?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y)})),t.stroke(),t.fillStyle="#b8c6db",t.font="12px monospace",t.textAlign="right";for(let e=0;e<=4;e++){const n=l-e/4*p,i=a+e/4*s;t.fillText(`$${n.toFixed(2)}`,32,i+4)}t.textAlign="center",["6d ago","5d ago","4d ago","3d ago","2d ago","1d ago","Now"].forEach(((e,n)=>{const i=a+n/6*o;t.fillText(e,i,r-a+20)}))}createRSIGauge(t){const e=t/100*180,n=t>70?"#ef4444":t<30?"#10b981":"#00d4ff";return`\n            <svg width="100%" height="80px" viewBox="0 0 100 50">\n                \x3c!-- Background arc --\x3e\n                <path d="M 10 40 A 30 30 0 0 1 90 40" stroke="rgba(255,255,255,0.2)" stroke-width="4" fill="none"/>\n                \x3c!-- RSI arc --\x3e\n                <path d="M 10 40 A 30 30 0 0 ${e>90?1:0} ${10+80*Math.cos((180-e)*Math.PI/180)} ${40-30*Math.sin((180-e)*Math.PI/180)}" \n                      stroke="${n}" stroke-width="4" fill="none"/>\n                \x3c!-- Needle --\x3e\n                <line x1="50" y1="40" x2="${50+25*Math.cos((180-e)*Math.PI/180)}" y2="${40-25*Math.sin((180-e)*Math.PI/180)}" \n                      stroke="${n}" stroke-width="2"/>\n                <circle cx="50" cy="40" r="2" fill="${n}"/>\n            </svg>\n        `}generateVolumeData(t){return Array.from({length:7},(()=>t*(.7+.6*Math.random())))}generateMarketCapData(t){return Array.from({length:7},(()=>t*(.95+.1*Math.random())))}getRSIStatus(t){return t>70?"Overbought":t<30?"Oversold":"Neutral"}getTechnicalSignal(t){const e=t.rsi||50,n=t.price>(t.moving_avg_50||t.price);return e>70?"SELL":e<30||n&&t.percent_change_24h>0?"BUY":!n&&t.percent_change_24h<0?"SELL":"HOLD"}getTechnicalSignalColor(t){switch(this.getTechnicalSignal(t)){case"BUY":return"#10b981";case"SELL":return"#ef4444";default:return"#f59e0b"}}getTrendStrength(t){const e=t.volatility_score||5;return e>7?"Strong":e>4?"Moderate":"Weak"}getSentimentLabel(t){return t>.7?"Very Positive":t>.5?"Positive":t>.3?"Neutral":"Negative"}getFearGreedLabel(t){return t>75?"Extreme Greed":t>55?"Greed":t>45?"Neutral":t>25?"Fear":"Extreme Fear"}getRecommendedAllocation(t){const e=t.market_cap;return e>1e11?Math.floor(15*Math.random()+10):e>1e10?Math.floor(10*Math.random()+5):Math.floor(5*Math.random()+1)}createSupportResistanceChart(t){const e=t.price,n=t.support_level||.9*e;return`\n            <div style="position:relative;height:100%;background:rgba(0,0,0,.3);border-radius:12px;padding:20px">\n                <div style="position:absolute;top:20%;left:0;right:0;height:2px;background:#ef4444;opacity:0.6"></div>\n                <div style="position:absolute;top:20%;left:10px;color:#ef4444;font-size:.8rem">Resistance: $${(t.resistance_level||1.1*e).toFixed(2)}</div>\n                \n                <div style="position:absolute;top:50%;left:0;right:0;height:3px;background:#00d4ff"></div>\n                <div style="position:absolute;top:50%;left:10px;color:#00d4ff;font-size:.9rem;font-weight:700">Current: $${e.toFixed(2)}</div>\n                \n                <div style="position:absolute;top:80%;left:0;right:0;height:2px;background:#10b981;opacity:0.6"></div>\n                <div style="position:absolute;top:80%;left:10px;color:#10b981;font-size:.8rem">Support: $${n.toFixed(2)}</div>\n            </div>\n        `}createSentimentGauge(t){return this.createRSIGauge(100*t)}createFearGreedGauge(t){return this.createRSIGauge(t)}createSentimentTrendChart(t){const e=Array.from({length:7},(()=>100*Math.random()));return this.createAdvancedPriceChart(e,!0)}createCorrelationChart(t){return`\n            <svg width="100%" height="100%" viewBox="0 0 100 100">\n                <line x1="0" y1="40" x2="100" y2="40" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>\n                ${[{name:"BTC",value:t.correlation_btc||.8},{name:"ETH",value:.7+.2*Math.random()},{name:"Market",value:.6+.3*Math.random()}].map(((t,e)=>{const n=60*Math.abs(t.value),i=t.value>0?40-n:40;return`\n                <rect x="${25*e+10}" y="${i}" width="15" height="${n}" fill="${t.value>0?"#10b981":"#ef4444"}" opacity="0.8"/>\n                <text x="${25*e+17}" y="95" fill="#b8c6db" font-size="8" text-anchor="middle">${t.name}</text>\n                <text x="${25*e+17}" y="${i-5}" fill="#fff" font-size="6" text-anchor="middle">${t.value.toFixed(2)}</text>\n            `})).join("")}\n            </svg>\n        `}createAllocationChart(t){const e=this.getRecommendedAllocation(t);return`\n            <svg width="120" height="120" viewBox="0 0 120 120" style="margin:0 auto">\n                <circle cx="60" cy="60" r="50" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="8"/>\n                <circle cx="60" cy="60" r="50" fill="none" stroke="#00d4ff" stroke-width="8" \n                        stroke-dasharray="${3.14*e}" stroke-dashoffset="0" \n                        transform="rotate(-90 60 60)" stroke-linecap="round"/>\n                <text x="60" y="65" text-anchor="middle" fill="#00d4ff" font-size="14" font-weight="bold">${e}%</text>\n            </svg>\n        `}formatPrice(t){return"number"!=typeof t||isNaN(t)?"0.00":t>=1e3?t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):t>=1?t.toFixed(2):t>=.01?t.toFixed(4):t.toFixed(6)}formatMarketCap(t){return"number"!=typeof t||isNaN(t)?"0":t>=1e12?`${(t/1e12).toFixed(2)}T`:t>=1e9?`${(t/1e9).toFixed(1)}B`:t>=1e6?`${(t/1e6).toFixed(0)}M`:`${(t/1e3).toFixed(0)}K`}formatVolume(t){return"number"!=typeof t||isNaN(t)?"0":t>=1e9?`${(t/1e9).toFixed(1)}B`:t>=1e6?`${(t/1e6).toFixed(0)}M`:`${(t/1e3).toFixed(0)}K`}refreshAnalysis(){this.countdownTimer=60,this.loadData()}destroy(){this.countdownInterval&&clearInterval(this.countdownInterval)}showDetails(t){const e=this.coins.find((e=>e.symbol===t));if(!e)return;console.log(`üìä Showing analytics for ${t}`);const n=document.createElement("div");n.style.cssText="position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.8);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;z-index:10000;animation:fadeIn 0.3s ease",n.innerHTML=`\n            <div style="background:linear-gradient(135deg,rgba(30,35,50,.98),rgba(40,46,65,.95));backdrop-filter:blur(30px);border:1px solid rgba(255,255,255,.15);border-radius:24px;padding:0;max-width:95vw;max-height:95vh;color:#fff;overflow:hidden;box-shadow:0 25px 80px rgba(0,0,0,.6);width:1200px;height:800px;display:flex;flex-direction:column">\n                \n                \x3c!-- Header --\x3e\n                <div style="display:flex;justify-content:space-between;align-items:center;padding:24px 32px;border-bottom:1px solid rgba(255,255,255,.1);background:linear-gradient(135deg,rgba(0,212,255,.1),rgba(30,35,50,.8))">\n                    <div style="display:flex;align-items:center;gap:16px">\n                        <div style="width:48px;height:48px;background:linear-gradient(135deg,#00d4ff,#4facfe);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.5rem;font-weight:900;color:#fff">${e.symbol.charAt(0)}</div>\n                        <div>\n                            <h2 style="font-size:1.8rem;font-weight:800;margin:0;background:linear-gradient(135deg,#ffffff,#00d4ff);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent">${e.name}</h2>\n                            <p style="margin:0;color:#b8c6db;font-size:.9rem;font-weight:600">${e.symbol} ‚Ä¢ Rank #${e.rank}</p>\n                        </div>\n                    </div>\n                    <div style="display:flex;align-items:center;gap:16px">\n                        <div style="text-align:right">\n                            <div style="font-size:2rem;font-weight:900;color:#00d4ff;font-family:monospace">$${this.formatPrice(e.price)}</div>\n                            <div style="color:${e.percent_change_24h>0?"#10b981":"#ef4444"};font-weight:700;font-size:1.1rem">${e.percent_change_24h>0?"+":""}${e.percent_change_24h.toFixed(2)}%</div>\n                        </div>\n                        <button onclick="this.closest('.modal-overlay').remove()" style="background:rgba(239,68,68,.2);border:1px solid rgba(239,68,68,.3);color:#ef4444;font-size:1.3rem;cursor:pointer;padding:12px;border-radius:50%;transition:all .2s ease;width:48px;height:48px;display:flex;align-items:center;justify-content:center">‚úï</button>\n                    </div>\n                </div>\n\n                \x3c!-- Tab Navigation --\x3e\n                <div style="display:flex;padding:0 32px;background:rgba(0,0,0,.2);border-bottom:1px solid rgba(255,255,255,.1)">\n                    <button class="analytics-tab active" data-tab="overview" onclick="switchAnalyticsTab('overview')" style="background:none;border:none;color:#00d4ff;padding:16px 24px;font-weight:700;font-size:.9rem;cursor:pointer;border-bottom:3px solid #00d4ff;text-transform:uppercase;letter-spacing:.05em">üìä Overview</button>\n                    <button class="analytics-tab" data-tab="charts" onclick="switchAnalyticsTab('charts')" style="background:none;border:none;color:#b8c6db;padding:16px 24px;font-weight:700;font-size:.9rem;cursor:pointer;border-bottom:3px solid transparent;text-transform:uppercase;letter-spacing:.05em">üìà Price Charts</button>\n                    <button class="analytics-tab" data-tab="technicals" onclick="switchAnalyticsTab('technicals')" style="background:none;border:none;color:#b8c6db;padding:16px 24px;font-weight:700;font-size:.9rem;cursor:pointer;border-bottom:3px solid transparent;text-transform:uppercase;letter-spacing:.05em">‚ö° Technical</button>\n                    <button class="analytics-tab" data-tab="sentiment" onclick="switchAnalyticsTab('sentiment')" style="background:none;border:none;color:#b8c6db;padding:16px 24px;font-weight:700;font-size:.9rem;cursor:pointer;border-bottom:3px solid transparent;text-transform:uppercase;letter-spacing:.05em">üí≠ Sentiment</button>\n                    <button class="analytics-tab" data-tab="advanced" onclick="switchAnalyticsTab('advanced')" style="background:none;border:none;color:#b8c6db;padding:16px 24px;font-weight:700;font-size:.9rem;cursor:pointer;border-bottom:3px solid transparent;text-transform:uppercase;letter-spacing:.05em">üî¨ Advanced</button>\n                </div>\n\n                \x3c!-- Tab Content --\x3e\n                <div style="flex:1;overflow-y:auto;padding:32px">\n                    ${this.createAnalyticsTabContent(e)}\n                </div>\n            </div>\n        `,n.className="modal-overlay",document.body.appendChild(n),this.addAnalyticsModalStyles(),n.addEventListener("click",(t=>{t.target===n&&n.remove()}))}addAnalyticsModalStyles(){if(document.getElementById("analytics-modal-styles"))return;const t=document.createElement("style");t.id="analytics-modal-styles",t.textContent="\n            @keyframes fadeIn {\n                from { opacity: 0; transform: scale(0.95); }\n                to { opacity: 1; transform: scale(1); }\n            }\n            \n            .analytics-tab:hover {\n                color: #00d4ff !important;\n                background: rgba(0,212,255,0.05) !important;\n            }\n            \n            .analytics-tab.active {\n                color: #00d4ff !important;\n                border-bottom-color: #00d4ff !important;\n            }\n            \n            .analytics-tab-content {\n                display: block;\n            }\n            \n            .analytics-tab-content:not(.active) {\n                display: none !important;\n            }\n            \n            .modal-overlay {\n                animation: fadeIn 0.3s ease;\n            }\n        ",document.head.appendChild(t)}createAnalyticsTabContent(t){return`\n            \x3c!-- Overview Tab --\x3e\n            <div id="tab-overview" class="analytics-tab-content active">\n                ${this.createOverviewTab(t)}\n            </div>\n\n            \x3c!-- Charts Tab --\x3e\n            <div id="tab-charts" class="analytics-tab-content" style="display:none">\n                ${this.createChartsTab(t)}\n            </div>\n\n            \x3c!-- Technical Tab --\x3e\n            <div id="tab-technicals" class="analytics-tab-content" style="display:none">\n                ${this.createTechnicalTab(t)}\n            </div>\n\n            \x3c!-- Sentiment Tab --\x3e\n            <div id="tab-sentiment" class="analytics-tab-content" style="display:none">\n                ${this.createSentimentTab(t)}\n            </div>\n\n            \x3c!-- Advanced Tab --\x3e\n            <div id="tab-advanced" class="analytics-tab-content" style="display:none">\n                ${this.createAdvancedTab(t)}\n            </div>\n        `}createOverviewTab(t){return`\n            <div style="display:grid;grid-template-columns:2fr 1fr;gap:32px;height:100%">\n                \x3c!-- Main Chart Area --\x3e\n                <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:24px;position:relative">\n                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:24px">\n                        <h3 style="color:#fff;font-size:1.4rem;font-weight:700;margin:0">Price Movement (7D)</h3>\n                        <div style="display:flex;gap:8px">\n                            <button style="background:rgba(0,212,255,.2);border:1px solid rgba(0,212,255,.3);color:#00d4ff;padding:6px 12px;border-radius:8px;font-size:.8rem;font-weight:600;cursor:pointer">1D</button>\n                            <button style="background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);color:#b8c6db;padding:6px 12px;border-radius:8px;font-size:.8rem;font-weight:600;cursor:pointer">7D</button>\n                            <button style="background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);color:#b8c6db;padding:6px 12px;border-radius:8px;font-size:.8rem;font-weight:600;cursor:pointer">30D</button>\n                        </div>\n                    </div>\n                    <div style="height:300px;position:relative">\n                        ${this.createAdvancedPriceChart(t.price_history,t.percent_change_24h>0)}\n                    </div>\n                </div>\n\n                \x3c!-- Stats Panel --\x3e\n                <div style="display:flex;flex-direction:column;gap:20px">\n                    \x3c!-- Key Metrics --\x3e\n                    <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:20px">\n                        <h4 style="color:#00d4ff;font-size:1.1rem;font-weight:700;margin:0 0 16px 0;text-transform:uppercase;letter-spacing:.05em">üìä Key Metrics</h4>\n                        <div style="display:flex;flex-direction:column;gap:12px">\n                            <div style="display:flex;justify-content:space-between;align-items:center">\n                                <span style="color:#b8c6db;font-size:.9rem">Market Cap</span>\n                                <span style="color:#fff;font-weight:700;font-family:monospace">$${this.formatMarketCap(t.market_cap)}</span>\n                            </div>\n                            <div style="display:flex;justify-content:space-between;align-items:center">\n                                <span style="color:#b8c6db;font-size:.9rem">24h Volume</span>\n                                <span style="color:#fff;font-weight:700;font-family:monospace">$${this.formatVolume(t.volume_24h)}</span>\n                            </div>\n                            <div style="display:flex;justify-content:space-between;align-items:center">\n                                <span style="color:#b8c6db;font-size:.9rem">Circulating Supply</span>\n                                <span style="color:#fff;font-weight:700;font-family:monospace">${this.formatVolume(t.circulating_supply)}</span>\n                            </div>\n                            <div style="display:flex;justify-content:space-between;align-items:center">\n                                <span style="color:#b8c6db;font-size:.9rem">Max Supply</span>\n                                <span style="color:#fff;font-weight:700;font-family:monospace">${t.max_supply?this.formatVolume(t.max_supply):"Unlimited"}</span>\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Performance --\x3e\n                    <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:20px">\n                        <h4 style="color:#00d4ff;font-size:1.1rem;font-weight:700;margin:0 0 16px 0;text-transform:uppercase;letter-spacing:.05em">üéØ Performance</h4>\n                        <div style="display:flex;flex-direction:column;gap:12px">\n                            <div style="display:flex;justify-content:space-between;align-items:center">\n                                <span style="color:#b8c6db;font-size:.9rem">24h Change</span>\n                                <span style="color:${t.percent_change_24h>0?"#10b981":"#ef4444"};font-weight:700">${t.percent_change_24h>0?"+":""}${t.percent_change_24h.toFixed(2)}%</span>\n                            </div>\n                            <div style="display:flex;justify-content:space-between;align-items:center">\n                                <span style="color:#b8c6db;font-size:.9rem">7d Change</span>\n                                <span style="color:${(t.percent_change_7d||0)>0?"#10b981":"#ef4444"};font-weight:700">${(t.percent_change_7d||0)>0?"+":""}${(t.percent_change_7d||0).toFixed(2)}%</span>\n                            </div>\n                            <div style="display:flex;justify-content:space-between;align-items:center">\n                                <span style="color:#b8c6db;font-size:.9rem">30d Change</span>\n                                <span style="color:${(t.percent_change_30d||0)>0?"#10b981":"#ef4444"};font-weight:700">${(t.percent_change_30d||0)>0?"+":""}${(t.percent_change_30d||0).toFixed(2)}%</span>\n                            </div>\n                            <div style="display:flex;justify-content:space-between;align-items:center">\n                                <span style="color:#b8c6db;font-size:.9rem">Volatility</span>\n                                <span style="color:#f59e0b;font-weight:700">${(t.volatility_score||5).toFixed(1)}/10</span>\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Quick Actions --\x3e\n                    <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:20px">\n                        <h4 style="color:#00d4ff;font-size:1.1rem;font-weight:700;margin:0 0 16px 0;text-transform:uppercase;letter-spacing:.05em">üéØ Trading Signal</h4>\n                        <div style="text-align:center">\n                            <div style="background:${this.getTechnicalSignalColor(t)};color:#fff;padding:12px 24px;border-radius:12px;font-weight:800;font-size:1.2rem;margin-bottom:12px">\n                                ${this.getTechnicalSignal(t)}\n                            </div>\n                            <div style="color:#b8c6db;font-size:.8rem">Based on technical analysis</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `}createChartsTab(t){return`\n            <div style="display:grid;grid-template-columns:1fr 1fr;gap:24px;height:100%">\n                \x3c!-- Price Chart --\x3e\n                <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:24px">\n                    <h3 style="color:#fff;font-size:1.3rem;font-weight:700;margin:0 0 20px 0">üìà Price Chart</h3>\n                    <div style="height:250px;position:relative">\n                        ${this.createAdvancedPriceChart(t.price_history,t.percent_change_24h>0)}\n                    </div>\n                </div>\n\n                \x3c!-- Volume Chart --\x3e\n                <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:24px">\n                    <h3 style="color:#fff;font-size:1.3rem;font-weight:700;margin:0 0 20px 0">üìä Volume Chart</h3>\n                    <div style="height:250px;position:relative">\n                        ${this.createVolumeChart(t.volume_history||this.generateVolumeData(t.volume_24h))}\n                    </div>\n                </div>\n\n                \x3c!-- Market Cap Chart --\x3e\n                <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:24px">\n                    <h3 style="color:#fff;font-size:1.3rem;font-weight:700;margin:0 0 20px 0">üè¶ Market Cap</h3>\n                    <div style="height:250px;position:relative">\n                        ${this.createMarketCapChart(t.market_cap_history||this.generateMarketCapData(t.market_cap))}\n                    </div>\n                </div>\n\n                \x3c!-- Candlestick Chart --\x3e\n                <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:24px">\n                    <h3 style="color:#fff;font-size:1.3rem;font-weight:700;margin:0 0 20px 0">üïØÔ∏è Candlestick</h3>\n                    <div style="height:250px;position:relative">\n                        ${this.createCandlestickChart(t.price_history)}\n                    </div>\n                </div>\n            </div>\n        `}createTechnicalTab(t){const e=t.rsi||50,n=t.moving_avg_50||t.price,i=t.moving_avg_200||t.price;return`\n            <div style="display:grid;grid-template-columns:1fr 1fr;gap:24px;height:100%">\n                \x3c!-- RSI Indicator --\x3e\n                <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:24px">\n                    <h3 style="color:#fff;font-size:1.3rem;font-weight:700;margin:0 0 20px 0">üìä RSI (Relative Strength Index)</h3>\n                    <div style="position:relative;height:150px;background:rgba(0,0,0,.3);border-radius:12px;padding:20px">\n                        ${this.createRSIGauge(e)}\n                        <div style="text-align:center;margin-top:20px">\n                            <div style="color:#00d4ff;font-size:2rem;font-weight:900">${e.toFixed(1)}</div>\n                            <div style="color:#b8c6db;font-size:.9rem;margin-top:4px">${this.getRSIStatus(e)}</div>\n                        </div>\n                    </div>\n                </div>\n\n                \x3c!-- Moving Averages --\x3e\n                <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:24px">\n                    <h3 style="color:#fff;font-size:1.3rem;font-weight:700;margin:0 0 20px 0">üìà Moving Averages</h3>\n                    <div style="display:flex;flex-direction:column;gap:16px">\n                        <div style="background:rgba(0,0,0,.3);border-radius:12px;padding:16px">\n                            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">\n                                <span style="color:#b8c6db;font-size:.9rem">MA 50</span>\n                                <span style="color:#00d4ff;font-weight:700">$${n.toFixed(2)}</span>\n                            </div>\n                            <div style="color:${t.price>n?"#10b981":"#ef4444"};font-size:.8rem">\n                                ${t.price>n?"üü¢ Above MA50 (Bullish)":"üî¥ Below MA50 (Bearish)"}\n                            </div>\n                        </div>\n                        <div style="background:rgba(0,0,0,.3);border-radius:12px;padding:16px">\n                            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">\n                                <span style="color:#b8c6db;font-size:.9rem">MA 200</span>\n                                <span style="color:#00d4ff;font-weight:700">$${i.toFixed(2)}</span>\n                            </div>\n                            <div style="color:${t.price>i?"#10b981":"#ef4444"};font-size:.8rem">\n                                ${t.price>i?"üü¢ Above MA200 (Long-term Bull)":"üî¥ Below MA200 (Long-term Bear)"}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                \x3c!-- Support & Resistance --\x3e\n                <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:24px">\n                    <h3 style="color:#fff;font-size:1.3rem;font-weight:700;margin:0 0 20px 0">üéØ Support & Resistance</h3>\n                    <div style="height:200px;position:relative">\n                        ${this.createSupportResistanceChart(t)}\n                    </div>\n                </div>\n\n                \x3c!-- Technical Summary --\x3e\n                <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:24px">\n                    <h3 style="color:#fff;font-size:1.3rem;font-weight:700;margin:0 0 20px 0">üìã Technical Summary</h3>\n                    <div style="display:flex;flex-direction:column;gap:12px">\n                        <div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:rgba(0,0,0,.3);border-radius:8px">\n                            <span style="color:#b8c6db">Overall Signal</span>\n                            <span style="color:${this.getTechnicalSignalColor(t)};font-weight:700">${this.getTechnicalSignal(t)}</span>\n                        </div>\n                        <div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:rgba(0,0,0,.3);border-radius:8px">\n                            <span style="color:#b8c6db">Volatility</span>\n                            <span style="color:#f59e0b;font-weight:700">${(t.volatility_score||5).toFixed(1)}/10</span>\n                        </div>\n                        <div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:rgba(0,0,0,.3);border-radius:8px">\n                            <span style="color:#b8c6db">Trend Strength</span>\n                            <span style="color:#3b82f6;font-weight:700">${this.getTrendStrength(t)}</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `}createSentimentTab(t){const e=t.social_sentiment||.5,n=t.fear_greed_index||50;return`\n            <div style="display:grid;grid-template-columns:1fr 1fr;gap:24px;height:100%">\n                \x3c!-- Social Sentiment --\x3e\n                <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:24px">\n                    <h3 style="color:#fff;font-size:1.3rem;font-weight:700;margin:0 0 20px 0">üí≠ Social Sentiment</h3>\n                    <div style="text-align:center">\n                        ${this.createSentimentGauge(e)}\n                        <div style="margin-top:20px">\n                            <div style="color:#00d4ff;font-size:2rem;font-weight:900">${(100*e).toFixed(0)}%</div>\n                            <div style="color:#b8c6db;font-size:.9rem">${this.getSentimentLabel(e)}</div>\n                        </div>\n                    </div>\n                </div>\n\n                \x3c!-- Fear & Greed Index --\x3e\n                <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:24px">\n                    <h3 style="color:#fff;font-size:1.3rem;font-weight:700;margin:0 0 20px 0">üò± Fear & Greed Index</h3>\n                    <div style="text-align:center">\n                        ${this.createFearGreedGauge(n)}\n                        <div style="margin-top:20px">\n                            <div style="color:#00d4ff;font-size:2rem;font-weight:900">${n.toFixed(0)}</div>\n                            <div style="color:#b8c6db;font-size:.9rem">${this.getFearGreedLabel(n)}</div>\n                        </div>\n                    </div>\n                </div>\n\n                \x3c!-- News Sentiment Trends --\x3e\n                <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:24px">\n                    <h3 style="color:#fff;font-size:1.3rem;font-weight:700;margin:0 0 20px 0">üì∞ News Sentiment Trend</h3>\n                    <div style="height:200px">\n                        ${this.createSentimentTrendChart(t)}\n                    </div>\n                </div>\n\n                \x3c!-- Community Metrics --\x3e\n                <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:24px">\n                    <h3 style="color:#fff;font-size:1.3rem;font-weight:700;margin:0 0 20px 0">üë• Community Metrics</h3>\n                    <div style="display:flex;flex-direction:column;gap:16px">\n                        <div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:rgba(0,0,0,.3);border-radius:8px">\n                            <span style="color:#b8c6db">Social Score</span>\n                            <span style="color:#10b981;font-weight:700">${(40*Math.random()+60).toFixed(0)}/100</span>\n                        </div>\n                        <div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:rgba(0,0,0,.3);border-radius:8px">\n                            <span style="color:#b8c6db">Developer Activity</span>\n                            <span style="color:#3b82f6;font-weight:700">${Math.random()>.5?"High":"Medium"}</span>\n                        </div>\n                        <div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:rgba(0,0,0,.3);border-radius:8px">\n                            <span style="color:#b8c6db">Community Growth</span>\n                            <span style="color:#f59e0b;font-weight:700">+${(15*Math.random()+5).toFixed(1)}%</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `}createAdvancedTab(t){return`\n            <div style="display:grid;grid-template-columns:1fr 1fr;gap:24px;height:100%">\n                \x3c!-- Correlation Analysis --\x3e\n                <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:24px">\n                    <h3 style="color:#fff;font-size:1.3rem;font-weight:700;margin:0 0 20px 0">üîó Correlation Analysis</h3>\n                    <div style="height:250px">\n                        ${this.createCorrelationChart(t)}\n                    </div>\n                </div>\n\n                \x3c!-- Risk Metrics --\x3e\n                <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:24px">\n                    <h3 style="color:#fff;font-size:1.3rem;font-weight:700;margin:0 0 20px 0">‚ö†Ô∏è Risk Analysis</h3>\n                    <div style="display:flex;flex-direction:column;gap:16px">\n                        <div style="background:rgba(0,0,0,.3);border-radius:12px;padding:16px">\n                            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">\n                                <span style="color:#b8c6db">Volatility Risk</span>\n                                <span style="color:#ef4444;font-weight:700">${(t.volatility_score||5).toFixed(1)}/10</span>\n                            </div>\n                            <div style="background:rgba(255,255,255,.1);height:8px;border-radius:4px;overflow:hidden">\n                                <div style="background:#ef4444;height:100%;width:${10*(t.volatility_score||5)}%;border-radius:4px"></div>\n                            </div>\n                        </div>\n                        <div style="background:rgba(0,0,0,.3);border-radius:12px;padding:16px">\n                            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">\n                                <span style="color:#b8c6db">Liquidity Risk</span>\n                                <span style="color:#10b981;font-weight:700">${(10-(t.liquidity_score||8)).toFixed(1)}/10</span>\n                            </div>\n                            <div style="background:rgba(255,255,255,.1);height:8px;border-radius:4px;overflow:hidden">\n                                <div style="background:#10b981;height:100%;width:${10*(10-(t.liquidity_score||8))}%;border-radius:4px"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                \x3c!-- Portfolio Allocation --\x3e\n                <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:24px">\n                    <h3 style="color:#fff;font-size:1.3rem;font-weight:700;margin:0 0 20px 0">üìä Recommended Allocation</h3>\n                    <div style="text-align:center">\n                        ${this.createAllocationChart(t)}\n                        <div style="margin-top:20px;background:rgba(0,0,0,.3);border-radius:12px;padding:16px">\n                            <div style="color:#00d4ff;font-size:1.5rem;font-weight:900">${this.getRecommendedAllocation(t)}%</div>\n                            <div style="color:#b8c6db;font-size:.9rem;margin-top:4px">of portfolio</div>\n                        </div>\n                    </div>\n                </div>\n\n                \x3c!-- AI Prediction --\x3e\n                <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:24px">\n                    <h3 style="color:#fff;font-size:1.3rem;font-weight:700;margin:0 0 20px 0">ü§ñ AI Price Prediction</h3>\n                    <div style="display:flex;flex-direction:column;gap:12px">\n                        <div style="background:rgba(0,0,0,.3);border-radius:12px;padding:16px">\n                            <div style="display:flex;justify-content:space-between;margin-bottom:8px">\n                                <span style="color:#b8c6db">24h Prediction</span>\n                                <span style="color:#10b981;font-weight:700">+${(8*Math.random()+2).toFixed(1)}%</span>\n                            </div>\n                            <div style="color:#8b97a3;font-size:.8rem">Confidence: ${(20*Math.random()+70).toFixed(0)}%</div>\n                        </div>\n                        <div style="background:rgba(0,0,0,.3);border-radius:12px;padding:16px">\n                            <div style="display:flex;justify-content:space-between;margin-bottom:8px">\n                                <span style="color:#b8c6db">7d Prediction</span>\n                                <span style="color:#f59e0b;font-weight:700">${Math.random()>.5?"+":"-"}${(15*Math.random()+5).toFixed(1)}%</span>\n                            </div>\n                            <div style="color:#8b97a3;font-size:.8rem">Confidence: ${(15*Math.random()+60).toFixed(0)}%</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `}createVolumeChart(t){const e=Math.max(...t);return`\n            <svg width="100%" height="100%" viewBox="0 0 100 100">\n                ${t.map(((n,i)=>{const r=n/e*80;return`<rect x="${i/(t.length-1)*90+5-1}" y="${90-r}" width="2" height="${r}" fill="#00d4ff" opacity="0.7"/>`})).join("")}\n                <text x="2" y="15" fill="#b8c6db" font-size="3">Volume: $${this.formatVolume(e)}</text>\n            </svg>\n        `}createMarketCapChart(t){return this.createAdvancedPriceChart(t,!0)}createCandlestickChart(t){const e=[];for(let n=0;n<t.length-1;n+=2){const i=t[n],r=t[n+1]||i,a=1.02*Math.max(i,r),o=.98*Math.min(i,r),s=r>i,d=n/t.length*90+5,l=80-i/Math.max(...t)*60,p=80-r/Math.max(...t)*60,c=80-a/Math.max(...t)*60,g=80-o/Math.max(...t)*60;e.push(`\n                <line x1="${d}" y1="${c}" x2="${d}" y2="${g}" stroke="#666" stroke-width="0.5"/>\n                <rect x="${d-1}" y="${Math.min(l,p)}" width="2" height="${Math.abs(p-l)}" \n                      fill="${s?"#10b981":"#ef4444"}" opacity="0.8"/>\n            `)}return`\n            <svg width="100%" height="100%" viewBox="0 0 100 100">\n                ${e.join("")}\n            </svg>\n        `}}let e;window.refreshAnalysis=function(){e&&e.refreshAnalysis()},window.filterByAnalysis=function(t){e&&e.filterByAnalysis(t)},window.handleSortChange=function(){e&&e.handleSortChange()},document.addEventListener("DOMContentLoaded",(()=>{e=new t,e.init()}))})();